---
## Front matter
lang: ru-RU
title: Администрирование сетевых подсистем
subtitle: Расширенные настройки межсетевого экрана (Лабораторная работа №7)
author:
  - Суннатилло Махмудов
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 4 октября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цели и задачи работы

## Цель лабораторной работы

Получить навыки настройки межсетевого экрана **firewalld** в Linux:  
перенаправление портов, настройка маскарадинга и создание пользовательских служб.

## Задачи лабораторной работы

1. Создать пользовательскую службу **ssh-custom** на основе стандартной SSH.  
2. Настроить переадресацию порта **2022 → 22**.  
3. Активировать **маскарадинг (Masquerading)**.  
4. Проверить доступность подключения и выхода в Интернет.  
5. Подготовить конфигурацию для автоматического развертывания через Vagrant.

# Теоретическая часть

## Основные понятия

* **firewalld** — динамически управляемый брандмауэр Linux.  
* Работает с понятиями:
  - **Зона** — уровень доверия к сети.
  - **Служба** — набор правил доступа по портам и протоколам.
* Конфигурационные файлы:
  - `/usr/lib/firewalld/services/` — системные службы.
  - `/etc/firewalld/services/` — пользовательские службы.

## Механизмы работы

* **Port Forwarding** — перенаправление сетевых пакетов с одного порта на другой.  
* **Masquerading** — подмена исходного IP-адреса при выходе во внешнюю сеть (частный случай NAT).  
* **Преимущества firewalld:**
  - изменение правил без перезапуска;
  - централизованное управление зонами;
  - поддержка IPv4 и IPv6.

# Ход выполнения лабораторной работы

## Создание пользовательской службы

![Создание пользовательского файла службы](01.png){ #fig:001 width=70% }

## Активация пользовательской службы

![Появление службы ssh-custom после перезагрузки правил](05.png){ #fig:005 width=70% }

## Перенаправление портов

![Подключение по SSH через перенаправленный порт](06.png){ #fig:006 width=70% }

## Настройка Masquerading

![Включение пересылки пакетов и маскарадинга](07.png){ #fig:007 width=70% }

## Проверка выхода в Интернет

![Проверка доступа в Интернет после настройки маскарадинга](08.png){ #fig:008 width=70% }

## Автоматизация конфигурации

![Создание каталогов и скрипта firewall.sh для сохранения конфигурации](09.png){ #fig:009 width=70% }

# Вывод

В ходе лабораторной работы была освоена настройка **firewalld**:  
создана пользовательская служба, реализовано перенаправление портов и маскарадинг.  
Результатом стало формирование безопасной сетевой конфигурации и автоматизация её развертывания.
