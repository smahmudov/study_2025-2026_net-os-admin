---
## Front matter
lang: ru-RU
title: Администрирование сетевых подсистем
subtitle: Настройка SMTP-сервера (Лабораторная работа №8)
author:
  - Суннатилло Махмудов
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 7 октября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цель и задачи работы

## Цель лабораторной работы

Приобретение практических навыков установки и конфигурирования SMTP-сервера на базе **Postfix**.

## Задачи лабораторной работы

1. Установить и запустить почтовый сервер **Postfix**.  
2. Настроить параметры домена и локальной доставки.  
3. Проверить отправку и приём писем между сервером и клиентом.  
4. Настроить DNS-записи (**MX**, **A**, **PTR**) для маршрутизации почты.  
5. Автоматизировать настройку с помощью сценария **mail.sh**.

# Теоретическая часть

## Основы работы почтового сервера

* **Postfix** — это агент пересылки почты (**MTA**), обеспечивающий приём и доставку писем.
* Поддерживает протоколы **SMTP**, **ESMTP**, **LMTP**.
* Основные процессы:
  * **master** — контролирует все службы;
  * **smtpd** — принимает входящие соединения;
  * **pickup** — обрабатывает локальные письма;
  * **qmgr** — управляет очередью;
  * **local** — доставляет письма пользователям.

## Конфигурационные файлы Postfix

* `/etc/postfix/main.cf` — основной файл настроек.  
* `/etc/postfix/master.cf` — параметры служб.  
* `/var/log/maillog` — журнал работы.  
* `/var/spool/postfix/` — очередь сообщений.

# Практическая часть

## Установка и запуск Postfix

![Установка пакетов postfix и s-nail](01.png){ #fig:001 width=70% }

## Настройка параметров Postfix

![Проверка и изменение параметров myorigin и mydomain](03.png){ #fig:003 width=70% }

## Применение изменений и перезагрузка службы

![Перезагрузка конфигурации Postfix](04.png){ #fig:004 width=70% }

## Проверка работы почтового сервера

![Мониторинг журнала доставки писем](06.png){ #fig:006 width=70% }

## Доставка писем с клиента на сервер

![Лог доставки письма с клиента](09.png){ #fig:009 width=70% }

## Настройка сетевых параметров Postfix

![Настройка параметров inet_interfaces и mynetworks](10.png){ #fig:010 width=70% }

## Конфигурация Postfix для домена

![Файл прямой DNS-зоны с MX-записью](13.png){ #fig:013 width=70% }

## Проверка обратной DNS-зоны

![Файл обратной зоны 1.168.192.in-addr.arpa](14.png){ #fig:014 width=70% }

## Успешная доставка писем по домену

![Успешная доставка письма на доменный адрес](16.png){ #fig:016 width=70% }

# Выводы по проделанной работе

## Вывод

В ходе лабораторной работы был установлен и настроен почтовый сервер **Postfix**.  
Настроены локальная и доменная доставка, добавлены записи **MX**, **A**, **PTR**.  
Проверена успешная пересылка почты между клиентом и сервером.  
Реализована автоматизация конфигурации через сценарий **mail.sh** и систему **Vagrant**.
