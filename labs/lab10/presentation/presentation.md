---
## Front matter
lang: ru-RU
title: Администрирование сетевых подсистем
subtitle: Расширенные настройки SMTP-сервера (Лабораторная работа №10)
author:
  - Суннатилло Махмудов
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 20 октября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цели и задачи работы

## Цель лабораторной работы

Приобретение практических навыков по конфигурированию SMTP-сервера с настройкой аутентификации и шифрования.

## Задачи

1. Настроить доставку почты через **LMTP** между Postfix и Dovecot.  
2. Реализовать **SMTP-аутентификацию** с использованием SASL.  
3. Настроить **SMTP over TLS** для защищённой передачи данных.  
4. Проверить работу с помощью инструментов **telnet**, **openssl**, **Evolution**.  
5. Автоматизировать конфигурацию с использованием Vagrant.

# Теоретическая часть

## Компоненты почтовой системы

* **Postfix** — MTA, выполняет приём и маршрутизацию сообщений.  
* **Dovecot** — MDA, обеспечивает хранение и доступ к почтовым ящикам.  
* **LMTP** — протокол локальной передачи между Postfix и Dovecot.  
* **SASL** — механизм аутентификации в SMTP.  
* **TLS/SSL** — обеспечивает шифрование при передаче почты.

## Основные порты и протоколы

| Протокол | Назначение | Порт |
|-----------|-------------|------|
| SMTP | Передача писем между серверами | 25 |
| IMAP | Чтение почты на сервере | 143 |
| POP3 | Получение писем на клиент | 110 |
| Submission (STARTTLS) | Безопасная отправка писем | 587 |

# Настройка LMTP в Dovecot

## Подключение LMTP

![Добавление протокола LMTP в Dovecot](01.png){ #fig:001 width=70% }

## Настройка сокета LMTP

![Определение unix-сокета для LMTP](02.png){ #fig:002 width=70% }

## Проверка доставки письма

![Успешная доставка письма через LMTP](05.png){ #fig:003 width=70% }

# Настройка SMTP-аутентификации

## Конфигурация Dovecot

![Настройка службы auth в Dovecot](07.png){ #fig:004 width=70% }

## Настройка SASL в Postfix

![Тип аутентификации SASL и путь к сокету](08.png){ #fig:005 width=70% }

## Проверка через telnet

![Проверка SMTP-аутентификации через telnet](10.png){ #fig:006 width=70% }

# Настройка SMTP over TLS

## Подключение сертификатов

![TLS-сертификаты Dovecot и конфигурация Postfix](11.png){ #fig:007 width=70% }

## Настройка submission-порта

![Активация шифрованного SMTP на 587 порту](12.png){ #fig:008 width=70% }

## Тестирование через openssl

![Проверка соединения STARTTLS](13.png){ #fig:009 width=70% }

# Результаты и вывод

## Вывод

Настроена полноценная почтовая инфраструктура, обеспечивающая защищённую передачу и аутентификацию пользователей.  
Работоспособность подтверждена успешной доставкой писем и корректной работой через клиента **Evolution**.