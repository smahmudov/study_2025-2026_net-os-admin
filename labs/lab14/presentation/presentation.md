---
## Front matter
lang: ru-RU
title: Администрирование сетевых подсистем
subtitle: Настройка файловых служб Samba (Лабораторная работа №14)
author:
  - Суннатилло Махмудов
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 16 ноября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цели и задачи работы

## Цель лабораторной работы

Приобретение практических навыков настройки доступа групп пользователей к общим ресурсам по протоколу SMB с использованием файлового сервера Samba.

## Задачи лабораторной работы

1. Установить и настроить службу **Samba** на сервере.
2. Создать общий ресурс и настроить права доступа к нему.
3. Настроить межсетевой экран и параметры **SELinux** для работы Samba.
4. Настроить подключение Samba-ресурса на клиентской машине.
5. Реализовать автоматическое монтирование ресурса через **/etc/fstab**.
6. Внести изменения во внутреннее окружение виртуальных машин для автоматизации настройки.

# Теоретическая часть

## Назначение Samba и SMB/CIFS

* **Samba** — программный комплекс для взаимодействия Linux и Windows по протоколу **SMB/CIFS**.
* Обеспечивает:
  * доступ к файлам и каталогам;
  * доступ к сетевым принтерам;
  * доменные службы и аутентификацию.

* Основной протокол:
  * **SMB (Server Message Block)**;
  * современные версии: **CIFS**, **SMB2**, **SMB3**.

# Процесс выполнения лабораторной работы

## Подготовка серверного окружения

![Создание каталога /srv/sambashare](01.png){ #fig:001 width=70% }

## Настройка smb.conf

![Настройка smb.conf](02.png){ #fig:002 width=70% }

## Проверка конфигурации и запуск службы

![Статус службы smb](03.png){ #fig:003 width=70% }

## Проверка доступа через smbclient

![Проверка через smbclient](04.png){ #fig:004 width=70% }

## Настройка межсетевого экрана

![Просмотр файла samba.xml](05.png){ #fig:005 width=70% }

## Применение настроек firewalld

![Настройка firewalld](06.png){ #fig:006 width=70% }

## Настройка прав и SELinux

![Создание файла в общем каталоге](07.png){ #fig:007 width=70% }

## Добавление пользователя в базу Samba

![Добавление SMB-пользователя](08.png){ #fig:008 width=70% }

## Подготовка клиента

![Просмотр samba-client.xml](09.png){ #fig:009 width=70% }

## Настройка межсетевого экрана на клиенте

![Создание группы и добавление пользователя](10.png){ #fig:010 width=70% }

## Настройка рабочих групп и проверка ресурсов

![Проверка smbclient под пользователем](11.png){ #fig:011 width=70% }

## Монтирование ресурса на клиенте

![Монтирование ресурса](12.png){ #fig:012 width=70% }

## Проверка работы смонтированного ресурса

![Создание файлов на ресурсе](13.png){ #fig:013 width=70% }

## Подготовка учётных данных для автоматического монтирования

![Файл smbusers](14.png){ #fig:014 width=70% }

## Настройка fstab и автоматическое монтирование

![Настройка fstab](15.png){ #fig:015 width=70% }

## Контроль доступа к смонтированному ресурсу

![Проверка доступа к файлам](16.png){ #fig:016 width=70% }

# Выводы по проделанной работе

## Вывод

В ходе лабораторной работы была выполнена полноценная настройка файловой службы Samba:

  * установлены и настроены службы Samba;
  * создан и сконфигурирован общий каталог `/srv/sambashare`;
  * настроены права доступа, межсетевой экран и контексты SELinux;
  * настроен доступ к ресурсу как вручную, так и через автоматическое монтирование;
